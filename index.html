<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>CSS Solar System</title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
		<link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
		<script>
		$(function(){
			window.setInterval(function(){
				$.each( [ ".mercury"], function( index, value ){
					var angle, width,
						earth = $( value ),
						e = parseFloat( earth.data( "e" ) ),
						paraphelion = earth.data( "paraphelion" ),
						matrix = window.getComputedStyle( earth[ 0 ], null ).getPropertyValue("transform" );
				matrix = matrix.replace( /matrix\(|\)/, "" ).split(",");
				angle = Math.round(Math.atan2(matrix[ 1 ], matrix [ 0 ] ) * (180/Math.PI));
				angle = ( angle < 0 ) ? angle + 360 : angle ;
				angle = parseFloat( angle * .0174532925 );
				width = ( paraphelion * ( ( 1 + e ) / ( 1 + e * Math.cos( angle ) ) ) ) * 2;
				
				console.log( width );
				earth.css({
					width: width,
					height: width,
					"margin-left": -(width/2),
					"margin-top": -(width/2),
				});
				
				});
				
			});
		});
		</script>

	</head>
	<body>

		<div class="sun orbit">Sun</div>

		<div class="mercury orbit" data-paraphelion="153" data-e=".206"></div>
		<div class="mercury-orbit" data-paraphelion="153" data-e=".206">
			<!-- Mercury -->
		</div>

		<div class="venus orbit" data-paraphelion="359" data-e=".007">
			<!-- Venus -->
		</div>

		<div class="earth orbit" data-paraphelion="490" data-e=".017">
			<!-- Earth -->
		</div>

		<div class="mars orbit" data-paraphelion="690" data-e=".093">
			<!-- Mars -->
		</div>



	</body>
</html>
